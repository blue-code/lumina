<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumina ‚ú® - Cosmic Interface</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="header-title">
                <h1>‚ú® Lumina</h1>
                <p>Cosmic API Client</p>
            </div>
            <div class="header-actions">
                <div class="project-selector">
                    <label for="project-dropdown" style="font-size: 0.8rem; color: var(--text-muted);">PROJECT:</label>
                    <select id="project-dropdown" class="project-dropdown">
                        <option value="">Loading...</option>
                    </select>
                    <button class="btn-icon" id="btn-new-project" title="Create new project">‚ûï</button>
                    <button class="btn-icon" id="btn-manage-projects" title="Manage projects">‚öôÔ∏è</button>
                </div>
                <a href="/docs" class="header-link" target="_blank">
                    <span>üìö</span> API Docs
                </a>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h3>Explorer</h3>
                <div class="sidebar-actions-row">
                    <button class="btn-neon" id="btn-new-request" style="flex: 1;">
                        + New Request
                    </button>
                </div>
            </div>
            
            <div class="sidebar-actions">
                <div class="sidebar-actions-row">
                    <button class="btn-glass" id="btn-new-folder" title="New Folder" style="flex: 1;">
                        üìÅ Folder
                    </button>
                    <button class="btn-glass" id="btn-import-md" title="Import" style="flex: 1;">
                        üì• Import
                    </button>
                </div>
                <div class="sidebar-actions-row">
                    <button class="btn-glass" id="btn-share-project" title="Share" style="flex: 1;">
                        üîó Share
                    </button>
                    <button class="btn-glass" id="btn-global-constants" title="Globals" style="flex: 1;">
                        üåê Globals
                    </button>
                </div>
            </div>

            <div class="folder-tree" id="folder-tree">
                <!-- Folder tree will be loaded here -->
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Request Editor -->
            <div class="request-editor">
                <div class="request-header">
                    <select class="select-method" id="select-method">
                        <option value="GET">GET</option>
                        <option value="POST">POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                        <option value="PATCH">PATCH</option>
                        <option value="HEAD">HEAD</option>
                        <option value="OPTIONS">OPTIONS</option>
                    </select>
                    <input type="text" class="input-url" id="input-url" placeholder="https://api.example.com/v1/endpoint">
                    <button class="btn-send" id="btn-send">Send üöÄ</button>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" data-tab="params">Parameters</button>
                    <button class="tab" data-tab="headers">Headers</button>
                    <button class="tab" data-tab="body">Body</button>
                    <button class="tab" data-tab="auth">Auth</button>
                    <button class="tab" data-tab="docs">Docs</button>
                </div>

                <!-- Tab Contents -->
                <div class="tab-content active" id="tab-params">
                    <table class="key-value-table">
                        <thead>
                            <tr>
                                <th>Key</th>
                                <th>Value</th>
                                <th width="40"></th>
                            </tr>
                        </thead>
                        <tbody id="params-tbody">
                            <!-- Params will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <div class="tab-content" id="tab-headers">
                    <table class="key-value-table">
                        <thead>
                            <tr>
                                <th>Key</th>
                                <th>Value</th>
                                <th width="40"></th>
                            </tr>
                        </thead>
                        <tbody id="headers-tbody">
                            <!-- Headers will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <div class="tab-content" id="tab-body">
                    <div class="body-actions" style="margin-bottom: 1rem;">
                        <button class="btn-glass" id="btn-beautify-json">
                            ‚ú® Beautify JSON
                        </button>
                    </div>
                    <textarea id="body-raw" placeholder="{
  &quot;key&quot;: &quot;value&quot;
}"></textarea>
                </div>

                <div class="tab-content" id="tab-auth">
                    <div class="auth-container" style="max-width: 600px;">
                        <div class="form-group" style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; color: var(--text-muted);">Auth Type</label>
                            <select id="auth-type" class="select-method" style="width: 100%; text-align: left;">
                                <option value="none">No Auth</option>
                                <option value="basic">Basic Auth</option>
                                <option value="bearer">Bearer Token</option>
                                <option value="apikey">API Key</option>
                            </select>
                        </div>

                        <!-- Auth Fields (Hidden by default) -->
                        <div id="auth-basic" class="auth-section hidden">
                            <div class="form-group mb-1">
                                <input type="text" id="auth-basic-username" placeholder="Username" class="glass-input" style="width: 100%; padding: 0.8rem; border-radius: 6px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            </div>
                            <div class="form-group">
                                <input type="password" id="auth-basic-password" placeholder="Password" class="glass-input" style="width: 100%; padding: 0.8rem; border-radius: 6px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            </div>
                        </div>

                        <div id="auth-bearer" class="auth-section hidden">
                            <div class="form-group">
                                <input type="text" id="auth-bearer-token" placeholder="Bearer Token" class="glass-input" style="width: 100%; padding: 0.8rem; border-radius: 6px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            </div>
                        </div>

                        <div id="auth-apikey" class="auth-section hidden">
                            <div class="form-group mb-1">
                                <input type="text" id="auth-apikey-name" placeholder="Key Name (e.g. X-API-Key)" class="glass-input" style="width: 100%; padding: 0.8rem; border-radius: 6px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            </div>
                            <div class="form-group mb-1">
                                <input type="text" id="auth-apikey-value" placeholder="Key Value" class="glass-input" style="width: 100%; padding: 0.8rem; border-radius: 6px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: white;">
                            </div>
                            <div class="form-group">
                                <select id="auth-apikey-location" class="select-method" style="width: 100%; text-align: left;">
                                    <option value="header">Header</option>
                                    <option value="query">Query Params</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="tab-docs">
                    <div class="docs-preview-toggle" style="margin-bottom: 1rem;">
                        <button class="btn-glass" id="btn-toggle-preview">üëÅÔ∏è Toggle Preview</button>
                    </div>
                    <textarea id="docs-markdown" placeholder="# API Documentation"></textarea>
                    <div id="docs-preview" class="docs-preview hidden" style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 8px;"></div>
                </div>
            </div>

            <!-- Response Panel -->
            <div class="response-panel hidden" id="response-panel">
                <div class="response-header-section">
                    <div class="response-header-title" style="display: flex; align-items: center; gap: 1rem;">
                        <h3 style="margin: 0;">Response</h3>
                        <div class="response-status" id="response-status"></div>
                        <div class="response-meta" id="response-meta"></div>
                    </div>
                    <div class="response-header-actions">
                        <button class="btn-icon" id="btn-clear-response" title="Clear">üóëÔ∏è</button>
                    </div>
                </div>

                <div class="response-body">
                    <pre id="response-body"></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals (Simplified structure for new design) -->
    <!-- New Project Modal -->
    <div class="modal" id="new-project-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Project</h3>
                <button class="modal-close" id="btn-close-new-project">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="new-project-name" placeholder="Project Name" class="glass-input" style="width: 100%; padding: 0.8rem; border-radius: 6px;">
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="btn-cancel-new-project">Cancel</button>
                <button class="btn-primary" id="btn-confirm-new-project">Create</button>
            </div>
        </div>
    </div>

    <!-- Other modals would follow similar structure, kept minimal for brevity but functional -->
    <!-- Manage Projects Modal -->
    <div class="modal" id="manage-projects-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Manage Projects</h3>
                <button class="modal-close" id="btn-close-manage-projects">&times;</button>
            </div>
            <div class="modal-body">
                <div class="projects-list" id="projects-list"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="btn-close-manage-projects2">Close</button>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal" id="import-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Import Markdown</h3>
                <button class="modal-close" id="btn-close-import">&times;</button>
            </div>
            <div class="modal-body">
                <textarea id="import-markdown-textarea" placeholder="Paste Markdown here..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="btn-cancel-import">Cancel</button>
                <button class="btn-primary" id="btn-confirm-import">Import</button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal" id="share-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Project</h3>
                <button class="modal-close" id="btn-close-share">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 1rem;">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-muted);">Expires In:</label>
                    <select id="share-expires" class="select-method" style="width: 100%; text-align: left;">
                        <option value="">Never</option>
                        <option value="24">24 Hours</option>
                        <option value="168">7 Days</option>
                    </select>
                </div>
                <button class="btn-primary" id="btn-create-share" style="width: 100%;">Generate Link</button>
                <div id="share-url-container" style="display: none; margin-top: 1rem;">
                    <input type="text" id="share-url-input" readonly class="glass-input" style="width: 100%; padding: 0.8rem; border-radius: 6px;">
                </div>
            </div>
        </div>
    </div>

    <!-- Global Constants Modal -->
    <div class="modal" id="global-constants-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Global Constants</h3>
                <button class="modal-close" id="btn-close-global-constants">&times;</button>
            </div>
            <div class="modal-body">
                <table class="key-value-table">
                    <thead>
                        <tr>
                            <th>Key</th>
                            <th>Value</th>
                            <th width="40"><button class="btn-icon" id="btn-add-global-constant">+</button></th>
                        </tr>
                    </thead>
                    <tbody id="global-constants-tbody"></tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="btn-cancel-global-constants">Cancel</button>
                <button class="btn-primary" id="btn-save-global-constants">Save</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
